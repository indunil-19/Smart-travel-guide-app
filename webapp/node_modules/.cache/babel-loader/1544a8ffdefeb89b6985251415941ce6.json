{"ast":null,"code":"var _jsxFileName = \"D:\\\\sem 5 project travel guide app\\\\Smart-travel-guide-app\\\\adminportal\\\\src\\\\screens\\\\TravelPlanApp\\\\signIn.js\",\n    _s = $RefreshSig$();\n\nimport { Flex, Heading, VStack, Text } from \"@chakra-ui/layout\";\nimport { Input, InputGroup, InputLeftAddon, Button, Checkbox, useToast } from \"@chakra-ui/react\";\nimport { useState, useContext } from \"react\";\nimport { BiUserCircle } from \"react-icons/bi\";\nimport { RiLockPasswordLine } from \"react-icons/ri\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory } from \"react-router\";\nimport { TravelContext } from \"../../context/TravelContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const SignIn = () => {\n  _s();\n\n  const {\n    state,\n    dispatch\n  } = useContext(TravelContext);\n  const history = useHistory();\n  const toast = useToast();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n\n    if (user) {\n      dispatch({\n        type: \"USER\",\n        payload: user\n      });\n    } else {\n      history.push('/travelPlan/signin');\n    }\n  }, []);\n\n  const sign = () => {\n    if (!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)) {\n      toast({\n        title: \"Enter valid email\",\n        position: \"top-right\",\n        status: \"error\",\n        duration: 4000,\n        isClosable: true\n      });\n      return;\n    }\n\n    fetch(\"/signin\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        password,\n        email\n      })\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n\n      if (data.error) {\n        toast({\n          title: data.error,\n          position: \"top-right\",\n          status: \"error\",\n          duration: 4000,\n          isClosable: true\n        });\n      } else {\n        toast({\n          title: data.message,\n          position: \"top-right\",\n          status: \"success\",\n          duration: 4000,\n          isClosable: true\n        });\n        localStorage.setItem(\"user\", JSON.stringify(data.user));\n        dispatch({\n          type: \"USER\",\n          payload: data.user\n        });\n        history.push('/travelPlan');\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Flex, {\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      minHeight: \"100vh\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      backgroundImage: \"url('https://images.unsplash.com/photo-1578519050142-afb511e518de?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1374&q=80')\",\n      children: /*#__PURE__*/_jsxDEV(Flex, {\n        p: 10,\n        borderColor: \"white\",\n        borderWidth: 3,\n        borderRadius: 8,\n        width: \"md\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        boxShadow: \"dark-lg\",\n        color: \"white\",\n        children: /*#__PURE__*/_jsxDEV(VStack, {\n          spacing: 10,\n          w: \"md\",\n          color: \"white\",\n          children: [/*#__PURE__*/_jsxDEV(Heading, {\n            as: \"h2\",\n            size: \"xl\",\n            color: \"white\",\n            children: \"SignIn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n            children: [/*#__PURE__*/_jsxDEV(BiUserCircle, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"email\",\n              placeholder: \"email\",\n              value: email,\n              onChange: e => setEmail(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n            children: [/*#__PURE__*/_jsxDEV(RiLockPasswordLine, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"password\",\n              type: \"password\",\n              value: password,\n              onChange: e => setPassword(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            colorScheme: \"blue\",\n            onClick: () => sign(),\n            children: \"Sign In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            children: [\"you don't have an account?\", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/travelPlan/signup\",\n              children: \"SignUp\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 50\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(SignIn, \"SBg66RwwT1m0nKtCCxAFuAsGP/o=\", false, function () {\n  return [useHistory, useToast];\n});\n\n_c = SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["D:/sem 5 project travel guide app/Smart-travel-guide-app/adminportal/src/screens/TravelPlanApp/signIn.js"],"names":["Flex","Heading","VStack","Text","Input","InputGroup","InputLeftAddon","Button","Checkbox","useToast","useState","useContext","BiUserCircle","RiLockPasswordLine","Link","useHistory","TravelContext","SignIn","state","dispatch","history","toast","email","setEmail","password","setPassword","useEffect","user","JSON","parse","localStorage","getItem","type","payload","push","sign","test","title","position","status","duration","isClosable","fetch","method","headers","body","stringify","then","res","json","data","console","log","error","message","setItem","catch","err","e","target","value"],"mappings":";;;AAAA,SAASA,IAAT,EAAcC,OAAd,EAAuBC,MAAvB,EAA+BC,IAA/B,QAA0C,mBAA1C;AACA,SAASC,KAAT,EAAgBC,UAAhB,EAA4BC,cAA5B,EAA4CC,MAA5C,EAAoDC,QAApD,EAA6DC,QAA7D,QAA4E,kBAA5E;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,OAArC;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SAASC,kBAAT,QAAmC,gBAAnC;AACA,SAASC,IAAT,QAAsB,kBAAtB;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,aAAT,QAA8B,6BAA9B;;;AAEA,OAAO,MAAMC,MAAM,GAAC,MAAI;AAAA;;AAGpB,QAAM;AAACC,IAAAA,KAAD;AAAQC,IAAAA;AAAR,MAAkBR,UAAU,CAACK,aAAD,CAAlC;AACA,QAAMI,OAAO,GAACL,UAAU,EAAxB;AACA,QAAMM,KAAK,GAACZ,QAAQ,EAApB;AACA,QAAM,CAACa,KAAD,EAAQC,QAAR,IAAkBb,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACc,QAAD,EAAUC,WAAV,IAAuBf,QAAQ,CAAC,EAAD,CAArC;AAGAgB,EAAAA,SAAS,CAAC,MAAI;AAEV,UAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAb;;AACA,QAAGJ,IAAH,EAAQ;AACNR,MAAAA,QAAQ,CAAC;AAACa,QAAAA,IAAI,EAAC,MAAN;AAAaC,QAAAA,OAAO,EAACN;AAArB,OAAD,CAAR;AACD,KAFD,MAEK;AACEP,MAAAA,OAAO,CAACc,IAAR,CAAa,oBAAb;AACN;AACF,GARM,EAQL,EARK,CAAT;;AAYA,QAAMC,IAAI,GAAC,MAAI;AACX,QAAG,CAAC,yJAAyJC,IAAzJ,CAA8Jd,KAA9J,CAAJ,EAAyK;AACrKD,MAAAA,KAAK,CAAC;AACFgB,QAAAA,KAAK,EAAE,mBADL;AAEFC,QAAAA,QAAQ,EAAC,WAFP;AAGFC,QAAAA,MAAM,EAAC,OAHL;AAIFC,QAAAA,QAAQ,EAAE,IAJR;AAKFC,QAAAA,UAAU,EAAE;AALV,OAAD,CAAL;AAOA;AACH;;AACGC,IAAAA,KAAK,CAAC,SAAD,EAAW;AACZC,MAAAA,MAAM,EAAC,MADK;AAEZC,MAAAA,OAAO,EAAC;AACJ,wBAAe;AADX,OAFI;AAKZC,MAAAA,IAAI,EAACjB,IAAI,CAACkB,SAAL,CAAe;AAChBtB,QAAAA,QADgB;AAEhBF,QAAAA;AAFgB,OAAf;AALO,KAAX,CAAL,CASGyB,IATH,CASQC,GAAG,IAAEA,GAAG,CAACC,IAAJ,EATb,EAUCF,IAVD,CAUMG,IAAI,IAAE;AACRC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AACA,UAAGA,IAAI,CAACG,KAAR,EAAc;AAEVhC,QAAAA,KAAK,CAAC;AACFgB,UAAAA,KAAK,EAAEa,IAAI,CAACG,KADV;AAEFf,UAAAA,QAAQ,EAAC,WAFP;AAGFC,UAAAA,MAAM,EAAC,OAHL;AAIFC,UAAAA,QAAQ,EAAE,IAJR;AAKFC,UAAAA,UAAU,EAAE;AALV,SAAD,CAAL;AAOH,OATD,MAUI;AAEApB,QAAAA,KAAK,CAAC;AACFgB,UAAAA,KAAK,EAAEa,IAAI,CAACI,OADV;AAEFhB,UAAAA,QAAQ,EAAC,WAFP;AAGFC,UAAAA,MAAM,EAAC,SAHL;AAIFC,UAAAA,QAAQ,EAAE,IAJR;AAKFC,UAAAA,UAAU,EAAE;AALV,SAAD,CAAL;AAOAX,QAAAA,YAAY,CAACyB,OAAb,CAAqB,MAArB,EAA4B3B,IAAI,CAACkB,SAAL,CAAeI,IAAI,CAACvB,IAApB,CAA5B;AACAR,QAAAA,QAAQ,CAAC;AAACa,UAAAA,IAAI,EAAC,MAAN;AAAaC,UAAAA,OAAO,EAACiB,IAAI,CAACvB;AAA1B,SAAD,CAAR;AACAP,QAAAA,OAAO,CAACc,IAAR,CAAa,aAAb;AACH;AACJ,KAnCD,EAmCGsB,KAnCH,CAmCSC,GAAG,IAAE;AACVN,MAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ;AACH,KArCD;AAuCP,GAlDD;;AAmDA,sBACI;AAAA,2BAEA,QAAC,IAAD;AAAO,MAAA,aAAa,EAAC,QAArB;AAA8B,MAAA,cAAc,EAAC,QAA7C;AAAsD,MAAA,UAAU,EAAC,QAAjE;AAA0E,MAAA,SAAS,EAAC,OAApF;AAA4F,MAAA,cAAc,EAAC,OAA3G;AAAmH,MAAA,kBAAkB,EAAC,QAAtI;AAA+I,MAAA,eAAe,EAAC,uKAA/J;AAAA,6BAEG,QAAC,IAAD;AAAM,QAAA,CAAC,EAAE,EAAT;AAAa,QAAA,WAAW,EAAC,OAAzB;AAAiC,QAAA,WAAW,EAAE,CAA9C;AAAkD,QAAA,YAAY,EAAE,CAAhE;AAAmE,QAAA,KAAK,EAAC,IAAzE;AAA8E,QAAA,cAAc,EAAC,QAA7F;AAAsG,QAAA,UAAU,EAAC,QAAjH;AAA0H,QAAA,SAAS,EAAC,SAApI;AAA8I,QAAA,KAAK,EAAC,OAApJ;AAAA,+BACC,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,EAAjB;AAAqB,UAAA,CAAC,EAAC,IAAvB;AAA4B,UAAA,KAAK,EAAC,OAAlC;AAAA,kCACI,QAAC,OAAD;AAAS,YAAA,EAAE,EAAC,IAAZ;AAAiB,YAAA,IAAI,EAAC,IAAtB;AAA2B,YAAA,KAAK,EAAC,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAKI,QAAC,UAAD;AAAA,oCACI,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,KAAD;AAAO,cAAA,IAAI,EAAC,OAAZ;AAAoB,cAAA,WAAW,EAAC,OAAhC;AAAyC,cAAA,KAAK,EAAEnC,KAAhD;AAAyD,cAAA,QAAQ,EAAGoC,CAAD,IAAKnC,QAAQ,CAACmC,CAAC,CAACC,MAAF,CAASC,KAAV;AAAhF;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBALJ,eAWI,QAAC,UAAD;AAAA,oCACI,QAAC,kBAAD;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,KAAD;AAAO,cAAA,WAAW,EAAC,UAAnB;AAA8B,cAAA,IAAI,EAAC,UAAnC;AAA8C,cAAA,KAAK,EAAEpC,QAArD;AAA+D,cAAA,QAAQ,EAAGkC,CAAD,IAAKjC,WAAW,CAACiC,CAAC,CAACC,MAAF,CAASC,KAAV;AAAzF;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXJ,eAkBI,QAAC,MAAD;AAAQ,YAAA,WAAW,EAAC,MAApB;AAA2B,YAAA,OAAO,EAAE,MAAIzB,IAAI,EAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAlBJ,eAmBI,QAAC,IAAD;AAAA,kEAAiC,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,oBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAnBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA;AAFH;AAAA;AAAA;AAAA;AAAA;AAFA,mBADJ;AAkCH,CA3GM;;GAAMlB,M;UAIKF,U,EACFN,Q;;;KALHQ,M","sourcesContent":["import { Flex,Heading, VStack ,Text} from \"@chakra-ui/layout\"\r\nimport { Input, InputGroup, InputLeftAddon ,Button, Checkbox,useToast} from \"@chakra-ui/react\"\r\nimport { useState ,useContext } from \"react\";\r\nimport { BiUserCircle } from \"react-icons/bi\";\r\nimport { RiLockPasswordLine } from \"react-icons/ri\";\r\nimport { Link, } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router\";\r\nimport { TravelContext } from \"../../context/TravelContext\";\r\n\r\nexport const SignIn=()=>{\r\n  \r\n    \r\n    const {state, dispatch}=useContext(TravelContext)\r\n    const history=useHistory()\r\n    const toast=useToast()\r\n    const [email, setEmail]=useState(\"\")\r\n    const [password,setPassword]=useState(\"\")\r\n\r\n\r\n    useEffect(()=>{\r\n      \r\n        const user = JSON.parse(localStorage.getItem(\"user\"))\r\n        if(user){\r\n          dispatch({type:\"USER\",payload:user})\r\n        }else{\r\n               history.push('/travelPlan/signin')\r\n        }\r\n      },[])\r\n\r\n\r\n      \r\n    const sign=()=>{\r\n        if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){\r\n            toast({\r\n                title: \"Enter valid email\",\r\n                position:\"top-right\",\r\n                status:\"error\",\r\n                duration: 4000,\r\n                isClosable: true,\r\n              })\r\n            return\r\n        }\r\n            fetch(\"/signin\",{\r\n                method:\"post\",\r\n                headers:{\r\n                    \"Content-Type\":\"application/json\"\r\n                },\r\n                body:JSON.stringify({\r\n                    password,\r\n                    email\r\n                })\r\n            }).then(res=>res.json())\r\n            .then(data=>{\r\n                console.log(data)\r\n                if(data.error){\r\n\r\n                    toast({\r\n                        title: data.error,\r\n                        position:\"top-right\",\r\n                        status:\"error\",\r\n                        duration: 4000,\r\n                        isClosable: true,\r\n                      })\r\n                }\r\n                else{\r\n\r\n                    toast({\r\n                        title: data.message,\r\n                        position:\"top-right\",\r\n                        status:\"success\",\r\n                        duration: 4000,\r\n                        isClosable: true,\r\n                      })\r\n                    localStorage.setItem(\"user\",JSON.stringify(data.user))\r\n                    dispatch({type:\"USER\",payload:data.user})\r\n                    history.push('/travelPlan')\r\n                }\r\n            }).catch(err=>{\r\n                console.log(err)\r\n            })\r\n\r\n    }\r\n    return(\r\n        <>\r\n        \r\n        <Flex  flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"100vh\" backgroundSize=\"cover\" backgroundPosition=\"center\" backgroundImage=\"url('https://images.unsplash.com/photo-1578519050142-afb511e518de?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1374&q=80')\">\r\n           \r\n           <Flex p={10} borderColor=\"white\" borderWidth={3}  borderRadius={8} width=\"md\" justifyContent=\"center\" alignItems=\"center\" boxShadow=\"dark-lg\" color=\"white\">\r\n            <VStack spacing={10} w=\"md\" color=\"white\">\r\n                <Heading as=\"h2\" size=\"xl\" color=\"white\">\r\n                   SignIn\r\n                </Heading>\r\n\r\n                <InputGroup >\r\n                    <BiUserCircle  />\r\n                    <Input type=\"email\" placeholder=\"email\"  value={email}   onChange={(e)=>setEmail(e.target.value)}  />\r\n                </InputGroup>\r\n\r\n                {/* If you add the size prop to `InputGroup`, it'll pass it to all its children. */}\r\n                <InputGroup >\r\n                    <RiLockPasswordLine/>\r\n                    <Input placeholder=\"password\" type=\"password\" value={password} onChange={(e)=>setPassword(e.target.value)}/>\r\n                </InputGroup>\r\n\r\n                {/* <Checkbox defaultIsChecked>Remember me</Checkbox> */}\r\n\r\n                <Button colorScheme=\"blue\" onClick={()=>sign()}>Sign In</Button>\r\n                <Text >you don't have an account?<Link to=\"/travelPlan/signup\" >SignUp</Link></Text>\r\n                \r\n            </VStack>\r\n            \r\n            </Flex>\r\n        </Flex>\r\n        \r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}