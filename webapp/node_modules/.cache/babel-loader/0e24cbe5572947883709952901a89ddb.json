{"ast":null,"code":"var _jsxFileName = \"D:\\\\sem 5 project travel guide app\\\\Smart-travel-guide-app\\\\adminportal\\\\src\\\\screens\\\\viewProvince.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport 'photoswipe/dist/photoswipe.css';\nimport 'photoswipe/dist/default-skin/default-skin.css';\nimport M from 'materialize-css';\nimport { Textarea } from \"@chakra-ui/react\";\nimport PhotoswipeUIDefault from 'photoswipe/dist/photoswipe-ui-default';\nimport { CustomGallery, Item, DefaultLayout } from 'react-photoswipe-gallery';\nimport { Button } from '@chakra-ui/button';\nimport { Box, Flex, Heading, Center } from '@chakra-ui/layout';\nimport NavBar from '../components/navbar';\nimport { DeleteIcon, ArrowUpIcon, EditIcon, CloseIcon, CheckIcon } from '@chakra-ui/icons';\nimport { useParams } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const ViewProvince = props => {\n  _s();\n\n  const {\n    pid\n  } = useParams();\n  const [ima, setIma] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  useEffect(() => {\n    fetch(\"/admin/getProvinceData/\" + pid).then(res => res.json()).then(data => {\n      console.log(data);\n      setIma(data.images);\n      setName(data.name);\n      setDescription(data.description);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(NavBar, {\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Center, {\n        children: /*#__PURE__*/_jsxDEV(Heading, {\n          mb: 4,\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Galary, {\n        imarr: ima,\n        pid: pid\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Description, {\n        des: description,\n        pid: pid\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 4\n  }, this);\n};\n\n_s(ViewProvince, \"zKmzVnwT6g1sbV02eqd7+LepGnk=\", false, function () {\n  return [useParams];\n});\n\n_c = ViewProvince;\n\nconst Description = ({\n  des,\n  pid\n}) => {\n  _s2();\n\n  useEffect(() => {\n    setDescription1(description);\n  }, [description]);\n  const [description1, setDescription1] = useState(\"\");\n  const [edit, setEdit] = useState(true);\n  const [isLoading, setLoading] = useState(false);\n\n  const updateDescription = () => {\n    setLoading(true);\n    fetch(\"/admin/descriptionUpdate\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        description: description1,\n        pid: pid\n      })\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n\n      if (data.message) {\n        M.toast({\n          html: data.message,\n          classes: \"#c62828 red darken-3\"\n        });\n        setDescription1(data.result.description);\n        setLoading(false);\n      }\n\n      if (data.error) {\n        M.toast({\n          html: data.message,\n          classes: \"#c62828 red darken-3\"\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Textarea, {\n      value: description1,\n      placeholder: \"type description here\",\n      isDisabled: false,\n      onChange: e => {\n        setDescription1(e.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }, this), edit ? /*#__PURE__*/_jsxDEV(Button, {\n      leftIcon: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 32\n      }, this),\n      colorScheme: \"teal\",\n      variant: \"solid\",\n      onClick: () => setEdit(false),\n      children: \"Edit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 14\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        leftIcon: /*#__PURE__*/_jsxDEV(CheckIcon, {\n          isLoading: isLoading,\n          loadingText: \"saving\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this),\n        colorScheme: \"teal\",\n        variant: \"solid\",\n        onClick: () => updateDescription(),\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        leftIcon: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 23\n        }, this),\n        colorScheme: \"teal\",\n        variant: \"solid\",\n        onClick: () => setEdit(true),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n};\n\n_s2(Description, \"82ryfT+8h5uNhxmeMPzJ9WNM/Y0=\");\n\n_c2 = Description;\n\nconst Galary = ({\n  pid,\n  imarr,\n  ...props\n}) => {\n  _s3();\n\n  useEffect(() => setImages(imarr), [imarr]);\n  const [images, setImages] = useState(imarr);\n  const layoutRef = useRef();\n  const inputRef = useRef();\n  const [isLoading, setLoading] = useState(false);\n  const [url, setUrl] = useState(\"\");\n\n  const postDetails = image => {\n    setLoading(true);\n    console.log(image);\n    const data = new FormData();\n    data.append(\"file\", image);\n    data.append(\"upload_preset\", \"employeeApp\");\n    data.append(\"cloud_name\", \"myimagcloud\");\n    fetch(\"https://api.cloudinary.com/v1_1/myimagcloud/image/upload\", {\n      method: \"post\",\n      body: data\n    }).then(res => res.json()).then(data => {\n      setUrl(data.url);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const deleteImage = image => {\n    fetch(\"/admin/deleteProvinceImage\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        image: image,\n        pid: pid\n      })\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n\n      if (data.message) {\n        M.toast({\n          html: data.message,\n          classes: \"#c62828 red darken-3\"\n        });\n        setImages(data.result.images);\n      }\n\n      if (data.error) {\n        M.toast({\n          html: data.message,\n          classes: \"#c62828 red darken-3\"\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    if (url) {\n      fetch(\"/admin/addImgtoProvinceData\", {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          image: url,\n          pid: pid,\n          name: \"\",\n          description: \"\"\n        })\n      }).then(res => res.json()).then(data => {\n        console.log(data);\n\n        if (data.message) {\n          M.toast({\n            html: data.message,\n            classes: \"#c62828 red darken-3\"\n          });\n          setImages(data.result.images);\n          setLoading(false);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }, [url]);\n  return /*#__PURE__*/_jsxDEV(Flex, {\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    children: [/*#__PURE__*/_jsxDEV(Flex, {\n      flexDirection: \"row\",\n      overflowX: \"scroll\",\n      margin: \"5\",\n      children: [/*#__PURE__*/_jsxDEV(CustomGallery, {\n        layoutRef: layoutRef,\n        ui: PhotoswipeUIDefault,\n        children: images.map((image, index) => {\n          return /*#__PURE__*/_jsxDEV(Item, {\n            original: image,\n            thumbnail: image,\n            width: \"1024\",\n            height: \"768\",\n            children: ({\n              ref,\n              open\n            }) => /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                ref: ref,\n                onClick: open,\n                src: image,\n                width: \"200px\",\n                height: \"200px\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => deleteImage(image),\n                children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 55\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 11\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(DefaultLayout, {\n        shareButton: false,\n        fullscreenButton: true,\n        zoomButton: true,\n        ref: layoutRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      isLoading: isLoading,\n      loadingText: \"Uploading\",\n      colorScheme: \"teal\",\n      variant: \"outline\",\n      rightIcon: /*#__PURE__*/_jsxDEV(ArrowUpIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 16\n      }, this),\n      onClick: () => inputRef.current.click(),\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: inputRef,\n      type: \"file\",\n      style: {\n        display: \"none\"\n      },\n      onChange: e => postDetails(e.target.files[0])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 5\n  }, this);\n};\n\n_s3(Galary, \"Pf5ZKbmdggb0d7jWG+xSHfOvVJE=\");\n\n_c3 = Galary;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ViewProvince\");\n$RefreshReg$(_c2, \"Description\");\n$RefreshReg$(_c3, \"Galary\");","map":{"version":3,"sources":["D:/sem 5 project travel guide app/Smart-travel-guide-app/adminportal/src/screens/viewProvince.js"],"names":["React","useState","useRef","useEffect","M","Textarea","PhotoswipeUIDefault","CustomGallery","Item","DefaultLayout","Button","Box","Flex","Heading","Center","NavBar","DeleteIcon","ArrowUpIcon","EditIcon","CloseIcon","CheckIcon","useParams","ViewProvince","props","pid","ima","setIma","name","setName","description","setDescription","fetch","then","res","json","data","console","log","images","catch","err","Description","des","setDescription1","description1","edit","setEdit","isLoading","setLoading","updateDescription","method","headers","body","JSON","stringify","message","toast","html","classes","result","error","e","target","value","Galary","imarr","setImages","layoutRef","inputRef","url","setUrl","postDetails","image","FormData","append","deleteImage","map","index","ref","open","current","click","display","files"],"mappings":"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","sourcesContent":["import React, { useState, useRef,useEffect } from 'react'\r\nimport 'photoswipe/dist/photoswipe.css'\r\nimport 'photoswipe/dist/default-skin/default-skin.css'\r\nimport M from 'materialize-css'\r\nimport { Textarea } from \"@chakra-ui/react\"\r\nimport PhotoswipeUIDefault from 'photoswipe/dist/photoswipe-ui-default'\r\nimport { CustomGallery, Item, DefaultLayout } from 'react-photoswipe-gallery'\r\nimport { Button } from '@chakra-ui/button'\r\nimport { Box, Flex, Heading,Center,   } from '@chakra-ui/layout'\r\nimport NavBar from '../components/navbar'\r\nimport { DeleteIcon,ArrowUpIcon, EditIcon, CloseIcon , CheckIcon} from '@chakra-ui/icons'\r\nimport { useParams } from 'react-router'\r\nexport const ViewProvince = (props) => {\r\n  const {pid}=useParams()\r\n  const [ima,setIma]=useState([])\r\n  const [name, setName]=useState(\"\")\r\n  const [description, setDescription]=useState(\"\")\r\n  useEffect(()=>{\r\n    \r\n     fetch(\"/admin/getProvinceData/\"+pid).\r\n     then(res=>res.json())\r\n     .then(data=>{\r\n        console.log(data)\r\n        setIma(data.images)\r\n        setName(data.name)\r\n        setDescription(data.description)\r\n       \r\n     }).catch(err=>{\r\n         console.log(err)\r\n     })\r\n  \r\n  },[])\r\n          \r\n  return (\r\n   <NavBar>\r\n     <>\r\n     <Center><Heading mb={4}>{name}</Heading></Center>\r\n     <Galary imarr={ima} pid={pid} />\r\n     <Description des={description} pid={pid} />\r\n     </>\r\n   </NavBar>\r\n  )\r\n}\r\nconst Description=({des, pid})=>{\r\n  useEffect(()=>{\r\n    setDescription1(description)\r\n  },[description])\r\n\r\n\r\n  const [description1, setDescription1]=useState(\"\")\r\n  const [edit, setEdit]=useState(true)\r\n  const [isLoading,setLoading]=useState(false)\r\n\r\n  \r\n\r\n  const updateDescription=()=>{\r\n      setLoading(true)\r\n      fetch(\"/admin/descriptionUpdate\",{\r\n        method:\"post\",\r\n        headers:{\r\n            \"Content-Type\":\"application/json\",\r\n        },\r\n        body:JSON.stringify({\r\n            description:description1,\r\n            pid:pid,\r\n        })\r\n    }).then(res=>res.json())\r\n    .then(data=>{\r\n      console.log(data)\r\n      if(data.message){\r\n          M.toast({html: data.message,classes:\"#c62828 red darken-3\"})\r\n          setDescription1(data.result.description)\r\n          setLoading(false)\r\n\r\n      }\r\n      if (data.error){\r\n        M.toast({html: data.message,classes:\"#c62828 red darken-3\"})\r\n      }\r\n      \r\n    }).catch(err=>{\r\n        console.log(err)\r\n    })\r\n  }\r\n\r\n  return(\r\n    <>\r\n      \r\n    <Textarea value={description1} placeholder=\"type description here\" isDisabled={false} onChange={(e)=>{ setDescription1(e.target.value); }}></Textarea>\r\n    { edit ? <Button leftIcon={<EditIcon /> } colorScheme=\"teal\" variant=\"solid\" onClick={()=>setEdit(false)}>\r\n     Edit\r\n    </Button> : \r\n    <>\r\n     <Button \r\n    leftIcon={<CheckIcon \r\n    isLoading={isLoading}\r\n    loadingText=\"saving\"/>  } colorScheme=\"teal\" variant=\"solid\" onClick={()=>updateDescription()}>\r\n     Save\r\n    </Button>\r\n\r\n    <Button leftIcon={<CloseIcon /> } colorScheme=\"teal\" variant=\"solid\" onClick={()=>setEdit(true)}>\r\n     Cancel\r\n    </Button>\r\n    \r\n    </>\r\n    \r\n    \r\n    } \r\n\r\n   \r\n    </>\r\n  )\r\n \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Galary=({pid,imarr,...props})=>{\r\n  useEffect(()=>setImages(imarr), [imarr])\r\n\r\n  const [images,setImages]=useState(imarr)\r\n  const layoutRef = useRef()\r\n  const inputRef = useRef()\r\n\r\n\r\n  const [isLoading,setLoading]=useState(false)\r\n  const [url,setUrl]=useState(\"\")\r\n\r\n  const postDetails = (image)=>{\r\n    setLoading(true)\r\n    console.log(image)\r\n    const data = new FormData()\r\n    data.append(\"file\",image)\r\n    data.append(\"upload_preset\",\"employeeApp\")\r\n    data.append(\"cloud_name\",\"myimagcloud\")\r\n    fetch(\"https://api.cloudinary.com/v1_1/myimagcloud/image/upload\",{\r\n        method:\"post\",\r\n        body:data\r\n    })\r\n    .then(res=>res.json())\r\n    .then(data=>{\r\n       setUrl(data.url)\r\n    })\r\n    .catch(err=>{\r\n        console.log(err)\r\n    })\r\n  \r\n  \r\n  }\r\n  const deleteImage=(image)=>{\r\n    fetch(\"/admin/deleteProvinceImage\",{\r\n      method:\"post\",\r\n      headers:{\r\n          \"Content-Type\":\"application/json\",\r\n      },\r\n      body:JSON.stringify({\r\n          image:image,\r\n          pid:pid,\r\n      })\r\n  }).then(res=>res.json())\r\n  .then(data=>{\r\n    console.log(data)\r\n    if(data.message){\r\n        M.toast({html: data.message,classes:\"#c62828 red darken-3\"})\r\n        setImages(data.result.images)\r\n\r\n    }\r\n    if (data.error){\r\n      M.toast({html: data.message,classes:\"#c62828 red darken-3\"})\r\n    }\r\n    \r\n  }).catch(err=>{\r\n      console.log(err)\r\n  })\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(()=>{\r\n    if(url){\r\n     fetch(\"/admin/addImgtoProvinceData\",{\r\n         method:\"post\",\r\n         headers:{\r\n             \"Content-Type\":\"application/json\",\r\n         },\r\n         body:JSON.stringify({\r\n             image:url,\r\n             pid:pid,\r\n             name:\"\",\r\n             description:\"\"\r\n         })\r\n     }).then(res=>res.json())\r\n     .then(data=>{\r\n        console.log(data)\r\n        if(data.message){\r\n           M.toast({html: data.message,classes:\"#c62828 red darken-3\"})\r\n           setImages(data.result.images)\r\n           setLoading(false)\r\n\r\n\r\n        }\r\n       \r\n     }).catch(err=>{\r\n         console.log(err)\r\n     })\r\n  }\r\n  },[url])\r\n\r\n\r\n  return(\r\n    <Flex flexDirection=\"column\" alignItems=\"center\">\r\n    <Flex flexDirection=\"row\" overflowX=\"scroll\" margin=\"5\">\r\n    <CustomGallery layoutRef={layoutRef} ui={PhotoswipeUIDefault}>\r\n\r\n      {images.map((image,index)=>{\r\n         return(\r\n          <Item key={index}\r\n          original={image}\r\n          thumbnail={image}\r\n          width=\"1024\"\r\n          height=\"768\"\r\n        >\r\n          {({ ref, open }) => (\r\n           <>\r\n            <img ref={ref} onClick={open} src={image}  width=\"200px\" height=\"200px\"/>\r\n            <Button onClick={()=>deleteImage(image)} ><DeleteIcon/></Button>\r\n           </>\r\n          )}\r\n        </Item>\r\n         )\r\n      })}\r\n   \r\n    </CustomGallery>\r\n\r\n    <DefaultLayout\r\n      shareButton={false}\r\n      fullscreenButton={true}\r\n      zoomButton={true}\r\n      ref={layoutRef}\r\n    />\r\n       \r\n    </Flex>\r\n  \r\n    <Button\r\n    isLoading={isLoading}\r\n    loadingText=\"Uploading\"\r\n    colorScheme=\"teal\"\r\n    variant=\"outline\"\r\n    rightIcon={<ArrowUpIcon/>}\r\n    onClick={()=>inputRef.current.click()}\r\n    \r\n    \r\n  >\r\n    Upload\r\n  </Button>\r\n  <input  ref={inputRef} type=\"file\" style={{display:\"none\"}} onChange={(e)=>postDetails(e.target.files[0])}/>\r\n    </Flex>\r\n    \r\n  )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}