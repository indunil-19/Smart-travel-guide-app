{"ast":null,"code":"var _jsxFileName = \"D:\\\\sem 5 project travel guide app\\\\Smart-travel-guide-app\\\\webapp\\\\src\\\\screens\\\\TravelPlanApp\\\\PlanReview.js\",\n    _s = $RefreshSig$();\n\nimport { Flex, Heading, HStack, VStack } from \"@chakra-ui/layout\";\nimport { AiOutlineStar } from \"react-icons/ai\";\nimport { StarIcon } from \"@chakra-ui/icons\";\nimport { useState, useContext, useEffect, useRef } from \"react\";\nimport { Input, Textarea, Button, AlertDialog, AlertDialogBody, AlertDialogFooter, AlertDialogHeader, AlertDialogContent, AlertDialogOverlay } from \"@chakra-ui/react\";\nimport { TravelContext } from \"../../context/TravelContext\";\nimport { FaRegShareSquare } from \"react-icons/fa\";\nimport { useToast } from \"@chakra-ui/toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const PlanReview = () => {\n  _s();\n\n  const [rate, setRate] = useState(0);\n  const [edit, setEdit] = useState(false);\n  const [review, setReview] = useState(\"\");\n  const {\n    state,\n    dispatch\n  } = useContext(TravelContext);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const onClose = () => setIsOpen(false);\n\n  const cancelRef = useRef();\n  const toast = useToast();\n  useEffect(() => {\n    fetch('/user/getReview', {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        planId: state.planId\n      })\n    }).then(res => res.json()).then(result => {\n      if (result.data.review || result.data.rate) {\n        setRate(result.data.rate);\n        setReview(result.data.review);\n        setEdit(false);\n        return;\n      }\n\n      setEdit(true);\n    }).catch(e => {\n      console.log(e);\n    });\n  }, []);\n\n  const submitReview = () => {\n    fetch('/user/addReview', {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        rate: rate,\n        review: review,\n        planId: state.planId\n      })\n    }).then(res => res.json()).then(result => {\n      if (result.data.review || result.data.rate) {\n        setRate(result.data.rate);\n        setReview(result.data.review);\n        setEdit(false);\n      }\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  const sharePlan = () => {\n    fetch('/user/sharePlan', {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        planId: state.planId\n      })\n    }).then(res => res.json()).then(result => {\n      setIsOpen(false);\n\n      if (result.result) {\n        toast({\n          description: \"your plan is shared, thank you\",\n          status: \"success\",\n          duration: 2000,\n          isClosable: true\n        });\n      } else {\n        toast({\n          description: \"you can't share this\",\n          status: \"success\",\n          duration: 2000,\n          isClosable: true\n        });\n      }\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AlertDialog, {\n      isOpen: isOpen,\n      leastDestructiveRef: cancelRef,\n      onClose: onClose,\n      children: /*#__PURE__*/_jsxDEV(AlertDialogOverlay, {\n        children: /*#__PURE__*/_jsxDEV(AlertDialogContent, {\n          children: [/*#__PURE__*/_jsxDEV(AlertDialogHeader, {\n            fontSize: \"lg\",\n            fontWeight: \"bold\",\n            children: \"Share your Travel Plan with us\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(AlertDialogBody, {\n            children: \"Are you sure? You can't undo this action afterwards.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(AlertDialogFooter, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              ref: cancelRef,\n              onClick: onClose,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              colorScheme: \"red\",\n              onClick: () => {\n                sharePlan();\n              },\n              ml: 3,\n              children: \"share\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }, this), \"s\", /*#__PURE__*/_jsxDEV(Flex, {\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      p: 10,\n      children: /*#__PURE__*/_jsxDEV(HStack, {\n        spacing: 5,\n        children: [/*#__PURE__*/_jsxDEV(Flex, {\n          minWidth: \"md\",\n          boxShadow: \"lg\",\n          borderRadius: \"lg\",\n          flexDirection: \"column\",\n          p: 5,\n          alignItems: \"center\",\n          children: /*#__PURE__*/_jsxDEV(VStack, {\n            minWidth: \"md\",\n            children: [/*#__PURE__*/_jsxDEV(Heading, {\n              size: \"xl\",\n              p: 5,\n              children: \"How do you feel about your travel plan????\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(HStack, {\n              p: 4,\n              children: [/*#__PURE__*/_jsxDEV(StarIcon, {\n                color: rate >= 1 ? \"teal\" : \"gray.200\",\n                onClick: () => {\n                  if (edit) {\n                    setRate(1);\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(StarIcon, {\n                color: rate >= 2 ? \"teal\" : \"gray.200\",\n                onClick: () => {\n                  if (edit) {\n                    setRate(2);\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(StarIcon, {\n                color: rate >= 3 ? \"teal\" : \"gray.200\",\n                onClick: () => {\n                  if (edit) {\n                    setRate(3);\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(StarIcon, {\n                color: rate >= 4 ? \"teal\" : \"gray.200\",\n                onClick: () => {\n                  if (edit) {\n                    setRate(4);\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(StarIcon, {\n                color: rate >= 5 ? \"teal\" : \"gray.200\",\n                onClick: () => {\n                  if (edit) {\n                    setRate(5);\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n              value: review,\n              onChange: e => setReview(e.target.value),\n              placeholder: \"Describe your expereince\",\n              size: \"md\",\n              isDisabled: !edit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 21\n            }, this), edit ? /*#__PURE__*/_jsxDEV(Button, {\n              colorScheme: \"blue\",\n              onClick: () => {\n                submitReview();\n              },\n              children: \"submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 29\n            }, this) : /*#__PURE__*/_jsxDEV(Button, {\n              colorScheme: \"blue\",\n              onClick: () => {\n                setEdit(true);\n              },\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }, this), rate ? /*#__PURE__*/_jsxDEV(FaRegShareSquare, {\n          onClick: () => {\n            setIsOpen(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 28\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(PlanReview, \"kwzhwTY5BZokAKqQpl67F4NnCcc=\", false, function () {\n  return [useToast];\n});\n\n_c = PlanReview;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlanReview\");","map":{"version":3,"sources":["D:/sem 5 project travel guide app/Smart-travel-guide-app/webapp/src/screens/TravelPlanApp/PlanReview.js"],"names":["Flex","Heading","HStack","VStack","AiOutlineStar","StarIcon","useState","useContext","useEffect","useRef","Input","Textarea","Button","AlertDialog","AlertDialogBody","AlertDialogFooter","AlertDialogHeader","AlertDialogContent","AlertDialogOverlay","TravelContext","FaRegShareSquare","useToast","PlanReview","rate","setRate","edit","setEdit","review","setReview","state","dispatch","isOpen","setIsOpen","onClose","cancelRef","toast","fetch","method","headers","body","JSON","stringify","planId","then","res","json","result","data","catch","e","console","log","submitReview","sharePlan","description","status","duration","isClosable","target","value"],"mappings":"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","sourcesContent":["import { Flex, Heading, HStack, VStack } from \"@chakra-ui/layout\"\r\nimport { AiOutlineStar } from \"react-icons/ai\";\r\nimport { StarIcon } from \"@chakra-ui/icons\";\r\nimport { useState,useContext,useEffect,useRef } from \"react\";\r\nimport { Input,Textarea,Button, AlertDialog, AlertDialogBody, AlertDialogFooter, AlertDialogHeader, AlertDialogContent, AlertDialogOverlay, } from \"@chakra-ui/react\"\r\nimport { TravelContext } from \"../../context/TravelContext\"\r\nimport { FaRegShareSquare } from \"react-icons/fa\";\r\nimport { useToast } from \"@chakra-ui/toast\";\r\n\r\nexport const PlanReview=()=>{\r\n    const [rate,setRate]=useState(0)\r\n    const [edit,setEdit]=useState(false)\r\n    const [review, setReview]=useState(\"\")\r\n    const {state, dispatch}=useContext(TravelContext)\r\n\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const onClose = () => setIsOpen(false)\r\n    const cancelRef = useRef()\r\n    const toast=useToast()\r\n\r\n    useEffect(() => {\r\n        fetch('/user/getReview',{\r\n            method:\"post\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n            },\r\n            body:JSON.stringify({\r\n                planId:state.planId\r\n            })   \r\n            }).then(res=>res.json()).\r\n            then(result=>{\r\n\r\n              if(result.data.review || result.data.rate){\r\n                setRate(result.data.rate)\r\n                setReview(result.data.review)\r\n                setEdit(false)\r\n                return\r\n              }\r\n              setEdit(true)\r\n               \r\n            })\r\n            .catch((e)=>{\r\n                console.log(e)\r\n            })\r\n    }, [])\r\n\r\n    const submitReview=()=>{\r\n        fetch('/user/addReview',{\r\n            method:\"post\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n            },\r\n            body:JSON.stringify({\r\n                rate:rate,\r\n                review:review,\r\n                planId:state.planId\r\n                })\r\n            }).then(res=>res.json()).\r\n            then(result=>{\r\n              if(result.data.review || result.data.rate){\r\n                setRate(result.data.rate)\r\n                setReview(result.data.review)\r\n                setEdit(false)\r\n              }\r\n               \r\n            })\r\n            .catch((e)=>{\r\n                console.log(e)\r\n            })\r\n        \r\n     }\r\n     const sharePlan=()=>{\r\n        fetch('/user/sharePlan',{\r\n            method:\"post\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n            },\r\n            body:JSON.stringify({\r\n                planId:state.planId\r\n                })\r\n            }).then(res=>res.json()).\r\n            then(result=>{\r\n                setIsOpen(false)\r\n               if(result.result){\r\n                    toast({\r\n                        description: \"your plan is shared, thank you\",\r\n                        status: \"success\",\r\n                        duration: 2000,\r\n                        isClosable: true,\r\n                    })\r\n               }\r\n               else{\r\n                    toast({\r\n                        description: \"you can't share this\",\r\n                        status: \"success\",\r\n                        duration: 2000,\r\n                        isClosable: true,\r\n                    })\r\n               }\r\n              \r\n               \r\n            })\r\n            .catch((e)=>{\r\n                console.log(e)\r\n            })\r\n     }\r\n\r\n    return(\r\n\r\n        <>\r\n\r\n\r\n                <AlertDialog\r\n                isOpen={isOpen}\r\n                leastDestructiveRef={cancelRef}\r\n                onClose={onClose}\r\n            >\r\n                <AlertDialogOverlay>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader fontSize=\"lg\" fontWeight=\"bold\">\r\n                    Share your Travel Plan with us\r\n                    </AlertDialogHeader>\r\n\r\n                    <AlertDialogBody>\r\n                    Are you sure? You can't undo this action afterwards.\r\n                    </AlertDialogBody>\r\n\r\n                    <AlertDialogFooter>\r\n                    <Button ref={cancelRef} onClick={onClose}>\r\n                        Cancel\r\n                    </Button>\r\n                    <Button colorScheme=\"red\" onClick={()=>{\r\n                        sharePlan()\r\n                    }} ml={3}>\r\n                        share\r\n                    </Button>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n                </AlertDialogOverlay>\r\n            </AlertDialog>\r\n        \r\n            s\r\n        \r\n        <Flex flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" p={10}>\r\n             <HStack spacing={5}>\r\n                <Flex minWidth=\"md\" boxShadow=\"lg\" borderRadius=\"lg\" flexDirection=\"column\" p={5} alignItems=\"center\">\r\n                    <VStack  minWidth=\"md\">\r\n                    <Heading size=\"xl\" p={5}>\r\n                        How do you feel about your travel plan????\r\n                    </Heading>\r\n                    <HStack p={4}>\r\n                    <StarIcon color={rate>=1 ? \"teal\" : \"gray.200\"} onClick={()=>{\r\n                        if(edit){\r\n                            setRate(1)\r\n                        }\r\n                        \r\n                    }}  />\r\n                    <StarIcon color={rate>=2 ? \"teal\" : \"gray.200\"} onClick={()=>{\r\n                        if(edit){\r\n                            setRate(2)\r\n                        }\r\n                    }} />\r\n                    <StarIcon color={rate>=3 ? \"teal\" : \"gray.200\"} onClick={()=>{\r\n                        if(edit){\r\n                            setRate(3)\r\n                        }\r\n                    }} />\r\n                    <StarIcon color={rate>=4 ? \"teal\" : \"gray.200\"} onClick={()=>{\r\n                        if(edit){\r\n                            setRate(4)\r\n                        }\r\n                    }} />\r\n                    <StarIcon color={rate>=5 ? \"teal\" : \"gray.200\"} onClick={()=>{\r\n                        if(edit){\r\n                            setRate(5)\r\n                        }\r\n                    }} />\r\n                    </HStack>\r\n\r\n                    <Textarea value={review}\r\n                            onChange={(e)=>setReview(e.target.value)}\r\n                        placeholder=\"Describe your expereince\"\r\n                        size=\"md\"\r\n                        isDisabled={!edit}\r\n                    />\r\n\r\n                    {edit ? <Button colorScheme=\"blue\" onClick={()=>{\r\n                            submitReview()\r\n                    }}>submit</Button> : \r\n                                <Button colorScheme=\"blue\" onClick={()=>{\r\n                                    setEdit(true)\r\n                            }}>Edit</Button>\r\n                    \r\n                    }\r\n                    </VStack>\r\n                </Flex>\r\n                {\r\n                    rate ? <FaRegShareSquare  onClick={()=>{\r\n                        setIsOpen(true)\r\n                }}/> : <></>\r\n                }\r\n                </HStack>\r\n        </Flex>\r\n        \r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}